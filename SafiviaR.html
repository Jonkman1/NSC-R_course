<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Using Copilot in RStudio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="SafiviaR_files/libs/clipboard/clipboard.min.js"></script>
<script src="SafiviaR_files/libs/quarto-html/quarto.js"></script>
<script src="SafiviaR_files/libs/quarto-html/popper.min.js"></script>
<script src="SafiviaR_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="SafiviaR_files/libs/quarto-html/anchor.min.js"></script>
<link href="SafiviaR_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="SafiviaR_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="SafiviaR_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="SafiviaR_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="SafiviaR_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Using Copilot in RStudio</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Recently RStudio/Posit launched a new product called Copilot. Copilot is a tool that helps you write code faster and with less effort. It does this by suggesting code as you type. Copilot is powered by OpenAI Codex, a new AI system created by OpenAI. OpenAI Codex is trained on publicly available source code and natural language. It is able to generate code in a range of languages, including Python, JavaScript, TypeScript, Ruby, Go, PHP, Java, C++, C, Objective-C, and Swift. Copilot is currently available as a technical preview in Visual Studio Code and GitHub Copilot. in this tutorial, we will show you how to use Copilot in RStudio. In this tutorial we use the RStudio Desktop version.</p>
<p>Prerequisites To follow this tutorial, you need to have RStudio Desktop installed on your computer. You can download RStudio Desktop from the RStudio website. You also need to have a GitHub account. If you don’t have a GitHub account, you have to create one.</p>
<p>Set up Copilot in RStudio</p>
<p>To enable Copilot in RStudio, you have to install the RStudio Copilot plugin. To install the RStudio Copilot plugin, you have to follow these steps: 1. Navigate to Tools &gt; Global Options &gt; Copilot. 2. Check the box next to Enable Copilot. 3. Download and install the Copilot plugin. 4. Click the “Sign in with GitHub” button and follow the instructions to sign in to your GitHub account. 5. In the “Github Copilot Sign in” dialog, copy the Verification Code.</p>
<p><img src="Screenshot1.png" class="img-fluid"></p>
<ol start="6" type="1">
<li>Paste the Verification Code into the “Github Copilot Sign in” dialog and click the “Sign in” button.</li>
<li>Github will request the necessary permissions to install the Copilot plugin. Click the “Authorize” button to grant the necessary permissions.</li>
<li>After the permissions have been approved, your RStudio IDE will indicate that Copilot is enabled.<br>
</li>
<li>Close the Global Options dialogue, open a source file, and start typing. Copilot will start suggesting code as you type.</li>
</ol>
<p><a href="https://docs.posit.co/ide/user/ide/guide/tools/copilot.html">Here</a> you can find this information.</p>
</section>
<section id="using-copilot" class="level2">
<h2 class="anchored" data-anchor-id="using-copilot">Using Copilot</h2>
<p>This month I’m involved in a <a href="https://asiermoneva.com/2023-10-12-nscr/">NSC-R Data Carpentry Workshop</a>. This is a three day wokshop. The first day is about <em>OpenRefine for Social Science</em>. The other day are titled <em>R for Social Scientist</em>. OpenRefine is a powerful tool for working with messy data: cleaning it; transforming it from one format into another; and extending it with web services and external data. This was new for me.</p>
<ol type="1">
<li>In this blog I used R/RStudio and copilot for the <strong>most important steps in the data cleaning process</strong>, similar as you can find [here](https://datacarpentry.org/openrefine-socialsci/. Second, I used OpenRefine for the first time.</li>
<li>Then I used R/RStudio and copilot for <strong>some analyses</strong> which are presented here <a href="https://kelseygonzalez.github.io/2020-01-15-brynmawr-lessons/intro.html">Data Carpentry:R for Social Scientists</a></li>
</ol>
</section>
<section id="most-important-steps-in-data-cleaning-process" class="level2">
<h2 class="anchored" data-anchor-id="most-important-steps-in-data-cleaning-process">1. Most important steps in data cleaning process</h2>
<p>Let us first open the dataset of OpenRefine data, see <a href="https://openrefine.org/">OpenRefine</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>SAFI_openrefine <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"openrefine/SAFI_openrefine.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 131 Columns: 62
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (45): interview_date, province, district, ward, village, agr_assoc, rem...
dbl  (15): quest_no, years_farm, no_membrs, _members_count, years_liv, build...
dttm  (2): start, end

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(SAFI_openrefine)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use tidyverse package</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ purrr     1.0.2
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
<p>Let us put the variables in a specific order.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># change order of variables</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>SAFI_openrefine <span class="ot">&lt;-</span> SAFI_openrefine[,<span class="fu">c</span>(<span class="st">"village"</span>,<span class="st">"ward"</span>,<span class="st">"district"</span>,<span class="st">"province"</span>,<span class="st">"interview_date"</span>,<span class="st">"quest_no"</span>,<span class="st">"start"</span>,<span class="st">"end"</span>,<span class="st">"items_owned"</span>,<span class="st">"months_lack_food"</span>,<span class="st">"months_no_water"</span>,<span class="st">"liv_owned"</span>,<span class="st">"res_change"</span>,<span class="st">"no_food_mitigation"</span>,<span class="st">"respondent_roof_type"</span>, <span class="st">"respondent_wall_type"</span>, <span class="st">"respondent_roof_type"</span>, <span class="st">"gps_Altitude"</span>, <span class="st">"gps_Latitude"</span>, <span class="st">"gps_Longitude"</span>, <span class="st">"years_farm"</span>, <span class="st">"no_membrs"</span>, <span class="st">"years_liv"</span>, <span class="st">"rooms"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us research a specific variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#show groups village</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>SAFI_openrefine<span class="sc">$</span>village</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "God"               "God"               "God"              
  [4] "God"               "God"               "God"              
  [7] "God"               "Chirdozo"          "Chirodzo"         
 [10] "Chirodzo"          "God"               "God"              
 [13] "God"               "God"               "God"              
 [16] "God"               "God"               "God"              
 [19] "God"               "God"               "God"              
 [22] "God"               "Ruaca"             "Ruaca"            
 [25] "Ruaca"             "Ruaca"             "Ruaca"            
 [28] "Ruaca"             "Ruaca"             "Ruaca"            
 [31] "Ruaca"             "Ruaca"             "Ruaca"            
 [34] "Chirodzo"          "Chirodzo"          "Chirodzo"         
 [37] "Chirodzo"          "God"               "God"              
 [40] "God"               "God"               "God"              
 [43] "Chirodzo"          "Chirodzo"          "Chirodzo"         
 [46] "Chirodzo"          "Chirodzo"          "Chirodzo"         
 [49] "49"                "Chirodzo"          "Chirodzo"         
 [52] "Chirodzo"          "Chirodzo"          "Chirodzo"         
 [55] "Chirodzo"          "Chirodzo"          "Chirodzo"         
 [58] "Chirodzo"          "Chirodzo"          "Chirodzo"         
 [61] "Chirodzo"          "Chirodzo"          "Chirodzo"         
 [64] "Chirodzo"          "Chirodzo"          "Chirodzo"         
 [67] "Chirodzo"          "Chirodzo"          "Chirodzo"         
 [70] "Chirodzo"          "Ruaca"             "Chirodzo"         
 [73] "Ruaca"             "Ruaca"             "Ruaca"            
 [76] "God"               "Ruaca"             "God"              
 [79] "Ruaca"             "God"               "God"              
 [82] "God"               "God"               "God"              
 [85] "God"               "God"               "God"              
 [88] "God"               "God"               "Ruaca"            
 [91] "Ruaca"             "Ruaca"             "Ruaca"            
 [94] "Ruaca"             "God"               "God"              
 [97] "Ruaca"             "Ruaca"             "Ruaca"            
[100] "Ruaca"             "Ruca"              "Ruaca"            
[103] "God"               "God"               "Ruaca"            
[106] "Ruaca"             "Ruaca"             "Ruaca"            
[109] "Ruaca-Nhamuenda"   "Ruaca - Nhamuenda" "God"              
[112] "Ruaca-Nhamuenda"   "Ruaca-Nhamuenda"   "Ruca"             
[115] "Ruaca"             "Ruaca"             "God"              
[118] "God"               "Ruaca"             "Ruaca"            
[121] "Ruaca"             "Ruaca"             "Ruaca"            
[124] "Ruaca"             "Ruaca"             "Chirodzo"         
[127] "Ruaca"             "Ruaca"             "Ruaca"            
[130] "Chirodzo"          "Chirodzo"         </code></pre>
</div>
</div>
<p>We have to make this variable more consistent.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># change names of groups in village</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 49 will become Chirodzo, Chirdoze will become Chirodzo, Ruaca-Nhamuenda and Ruca wwill become Ruaca</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>SAFI_openrefine<span class="sc">$</span>village <span class="ot">&lt;-</span> <span class="fu">recode</span>(SAFI_openrefine<span class="sc">$</span>village, <span class="st">"49"</span> <span class="ot">=</span> <span class="st">"Chirodzo"</span>, <span class="st">"Chirdoze"</span> <span class="ot">=</span> <span class="st">"Chirodzo"</span>, <span class="st">"Chirdozo"</span> <span class="ot">=</span> <span class="st">"Chirodzo"</span>, <span class="st">"Ruaca-Nhamuenda"</span> <span class="ot">=</span> <span class="st">"Ruaca"</span>, <span class="st">"Ruaca - Nhamuenda"</span> <span class="ot">=</span> <span class="st">"Ruaca"</span>, <span class="st">"Ruca"</span> <span class="ot">=</span> <span class="st">"Ruaca"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>How does it look now?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#show groups village</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>SAFI_openrefine<span class="sc">$</span>village</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "God"      "God"      "God"      "God"      "God"      "God"     
  [7] "God"      "Chirodzo" "Chirodzo" "Chirodzo" "God"      "God"     
 [13] "God"      "God"      "God"      "God"      "God"      "God"     
 [19] "God"      "God"      "God"      "God"      "Ruaca"    "Ruaca"   
 [25] "Ruaca"    "Ruaca"    "Ruaca"    "Ruaca"    "Ruaca"    "Ruaca"   
 [31] "Ruaca"    "Ruaca"    "Ruaca"    "Chirodzo" "Chirodzo" "Chirodzo"
 [37] "Chirodzo" "God"      "God"      "God"      "God"      "God"     
 [43] "Chirodzo" "Chirodzo" "Chirodzo" "Chirodzo" "Chirodzo" "Chirodzo"
 [49] "Chirodzo" "Chirodzo" "Chirodzo" "Chirodzo" "Chirodzo" "Chirodzo"
 [55] "Chirodzo" "Chirodzo" "Chirodzo" "Chirodzo" "Chirodzo" "Chirodzo"
 [61] "Chirodzo" "Chirodzo" "Chirodzo" "Chirodzo" "Chirodzo" "Chirodzo"
 [67] "Chirodzo" "Chirodzo" "Chirodzo" "Chirodzo" "Ruaca"    "Chirodzo"
 [73] "Ruaca"    "Ruaca"    "Ruaca"    "God"      "Ruaca"    "God"     
 [79] "Ruaca"    "God"      "God"      "God"      "God"      "God"     
 [85] "God"      "God"      "God"      "God"      "God"      "Ruaca"   
 [91] "Ruaca"    "Ruaca"    "Ruaca"    "Ruaca"    "God"      "God"     
 [97] "Ruaca"    "Ruaca"    "Ruaca"    "Ruaca"    "Ruaca"    "Ruaca"   
[103] "God"      "God"      "Ruaca"    "Ruaca"    "Ruaca"    "Ruaca"   
[109] "Ruaca"    "Ruaca"    "God"      "Ruaca"    "Ruaca"    "Ruaca"   
[115] "Ruaca"    "Ruaca"    "God"      "God"      "Ruaca"    "Ruaca"   
[121] "Ruaca"    "Ruaca"    "Ruaca"    "Ruaca"    "Ruaca"    "Chirodzo"
[127] "Ruaca"    "Ruaca"    "Ruaca"    "Chirodzo" "Chirodzo"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># count village values are there in the survey results data?</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(SAFI_openrefine<span class="sc">$</span>village)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Chirodzo      God    Ruaca 
      39       43       49 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># count interview_date values are there in the survey results data?  </span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(SAFI_openrefine<span class="sc">$</span>interview_date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
11-May-17 16-Dec-16 16-Nov-16 17-Nov-16 18-May-17 18-Nov-16 21-Nov-16 23-Nov-16 
        4         1        26        22         5         1        23         1 
24-Nov-16 25-Nov-16 26-Apr-17 27-Apr-17 28-Apr-17 28-Nov-16  3-Jun-17  3-May-17 
        4         5         3         5         5         6         9         3 
30-Apr-17  4-Jun-17  4-May-17 
        1         4         3 </code></pre>
</div>
</div>
<p>Look at variable <code>interview_date</code>. It is formatted as text. We have to change this to a date format.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Is variable interview_date formatted as Text or Date? (ChatGPT)</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>my_variable<span class="ot">&lt;-</span><span class="st">"17-Nov-16"</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">#check the class of interview_date</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">class</span>(my_variable) <span class="sc">==</span> <span class="st">"character"</span>) {</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">"The variable is formatted as text."</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">class</span>(my_variable) <span class="sc">==</span> <span class="st">"Date"</span>) {</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">"The variable is formatted as a date."</span>)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">"The variable is of an unknown type."</span>)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The variable is formatted as text."</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(SAFI_openrefine<span class="sc">$</span>interview_date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>Change interview_date</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use faceting to produce a timeline display for interview_date</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># convert this column to dates</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>SAFI_openrefine<span class="sc">$</span>interview_date <span class="ot">&lt;-</span> <span class="fu">dmy</span>(SAFI_openrefine<span class="sc">$</span>interview_date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># R count different dates of variable interview_data </span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(SAFI_openrefine<span class="sc">$</span>interview_date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
2016-11-16 2016-11-17 2016-11-18 2016-11-21 2016-11-23 2016-11-24 2016-11-25 
        26         22          1         23          1          4          5 
2016-11-28 2016-12-16 2017-04-26 2017-04-27 2017-04-28 2017-04-30 2017-05-03 
         6          1          3          5          5          1          3 
2017-05-04 2017-05-11 2017-05-18 2017-06-03 2017-06-04 
         3          4          5          9          4 </code></pre>
</div>
</div>
</section>
<section id="transforming-data" class="level2">
<h2 class="anchored" data-anchor-id="transforming-data">Transforming data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove left bracket from items_owned</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>SAFI_openrefine<span class="sc">$</span>items_owned <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(SAFI_openrefine<span class="sc">$</span>items_owned, <span class="st">"</span><span class="sc">\\</span><span class="st">["</span>, <span class="st">""</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">#remove right bracket from items_owned</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>SAFI_openrefine<span class="sc">$</span>items_owned <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(SAFI_openrefine<span class="sc">$</span>items_owned, <span class="st">"</span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># remove all ' from items_owned</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>SAFI_openrefine<span class="sc">$</span>items_owned <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(SAFI_openrefine<span class="sc">$</span>items_owned, <span class="st">"'"</span>, <span class="st">""</span>)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co">#remove white spaces from cells of items_owned</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>SAFI_openrefine<span class="sc">$</span>items_owned <span class="ot">&lt;-</span> <span class="fu">str_trim</span>(SAFI_openrefine<span class="sc">$</span>items_owned)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="co"># remove all ; from items_owned</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>SAFI_openrefine<span class="sc">$</span>items_owned <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(SAFI_openrefine<span class="sc">$</span>items_owned, <span class="st">";"</span>, <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># items_owned count and add the objects</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>items_owned_count <span class="ot">&lt;-</span> <span class="fu">table</span>(SAFI_openrefine<span class="sc">$</span>items_owned)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># add the objects of items_owned_count</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>items_owned_count <span class="ot">&lt;-</span> <span class="fu">sort</span>(items_owned_count, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># print the objects of items_owned_count</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>items_owned_count</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
                                                                                                                                                                NULL 
                                                                                                                                                                  10 
                                                                                                                                                        mobile_phone 
                                                                                                                                                                   4 
                                                                                                                                                               radio 
                                                                                                                                                                   4 
                                                                                             bicycle   radio   cow_plough   solar_panel   solar_torch   mobile_phone 
                                                                                                                                                                   3 
                                                                                                   bicycle   radio   cow_plough   solar_panel   table   mobile_phone 
                                                                                                                                                                   3 
                                                                                                                                      bicycle   radio   mobile_phone 
                                                                                                                                                                   3 
                                                                                                           bicycle   radio   cow_plough   solar_panel   mobile_phone 
                                                                                                                                                                   2 
                                                                                     bicycle   radio   cow_plough   solar_panel   solar_torch   table   mobile_phone 
                                                                                                                                                                   2 
                                                                                                                        bicycle   radio   solar_torch   mobile_phone 
                                                                                                                                                                   2 
                                                                                                cow_cart   bicycle   radio   cow_plough   solar_panel   mobile_phone 
                                                                                                                                                                   2 
                                                                                                                     cow_cart   bicycle   radio   cow_plough   table 
                                                                                                                                                                   2 
                                                         cow_cart   motorcyle   bicycle   television   radio   cow_plough   solar_panel   solar_torch   mobile_phone 
                                                                                                                                                                   2 
                                                               cow_cart   motorcyle   bicycle   television   radio   cow_plough   solar_panel   table   mobile_phone 
                                                                                                                                                                   2 
                                                                                                                                                          cow_plough 
                                                                                                                                                                   2 
                                                                                                                                           cow_plough   mobile_phone 
                                                                                                                                                                   2 
                                                            motorcyle   bicycle   television   radio   cow_plough   solar_panel   solar_torch   table   mobile_phone 
                                                                                                                                                                   2 
                                                                                                         motorcyle   radio   cow_plough   solar_panel   mobile_phone 
                                                                                                                                                                   2 
                                                                                                                                                  radio   cow_plough 
                                                                                                                                                                   2 
                                                                                                                                   radio   cow_plough   mobile_phone 
                                                                                                                                                                   2 
                                                                                                                                                         solar_torch 
                                                                                                                                                                   2 
                                                                                                                                                bicycle   cow_plough 
                                                                                                                                                                   1 
                                                                                                                   bicycle   cow_plough   solar_panel   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                                  bicycle   cow_plough   solar_torch 
                                                                                                                                                                   1 
                                                                                                                                              bicycle   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                                        bicycle   radio   cow_plough 
                                                                                                                                                                   1 
                                                                                                                         bicycle   radio   cow_plough   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                  bicycle   radio   cow_plough   solar_panel   table 
                                                                                                                                                                   1 
                                                                                                                 bicycle   radio   cow_plough   table   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                                               bicycle   solar_torch 
                                                                                                                                                                   1 
                                                                                                                                bicycle   solar_torch   mobile_phone 
                                                                                                                                                                   1 
                                                                                                             bicycle   solar_torch   table   sofa_set   mobile_phone 
                                                                                                                                                                   1 
                                                                                bicycle   television   radio   cow_plough   solar_panel   solar_torch   mobile_phone 
                                                                                                                                                                   1 
                                                                                      bicycle   television   radio   cow_plough   solar_torch   table   mobile_phone 
                                                                                                                                                                   1 
                                                                            bicycle   television   radio   sterio   solar_panel   solar_torch   table   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                          bicycle   television   solar_panel   table 
                                                                                                                                                                   1 
                                        car   lorry   motorcyle   radio   sterio   cow_plough   solar_panel   solar_torch   table   sofa_set   mobile_phone   fridge 
                                                                                                                                                                   1 
                                       car   lorry   television   radio   sterio   cow_plough   solar_torch   electricity   table   sofa_set   mobile_phone   fridge 
                                                                                                                                                                   1 
                                                                                                                                     cow_cart   bicycle   cow_plough 
                                                                                                                                                                   1 
                                                                                                 cow_cart   bicycle   radio   cow_plough   solar_panel   solar_torch 
                                                                                                                                                                   1 
                                                                          cow_cart   bicycle   radio   cow_plough   solar_panel   solar_torch   table   mobile_phone 
                                                                                                                                                                   1 
                                                                                        cow_cart   bicycle   radio   cow_plough   solar_panel   table   mobile_phone 
                                                                                                                                                                   1 
                                                                                                               cow_cart   bicycle   radio   cow_plough   solar_torch 
                                                                                                                                                                   1 
                                                                     cow_cart   bicycle   television   radio   cow_plough   solar_panel   electricity   mobile_phone 
                                                                                                                                                                   1 
cow_cart   car   lorry   motorcyle   bicycle   television   sterio   cow_plough   solar_panel   solar_torch   electricity   table   sofa_set   mobile_phone   fridge 
                                                                                                                                                                   1 
                                                                                                       cow_cart   cow_plough   solar_panel   sofa_set   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                  cow_cart   cow_plough   solar_torch   mobile_phone 
                                                                                                                                                                   1 
                         cow_cart   lorry   motorcyle   computer   television   radio   sterio   cow_plough   solar_panel   solar_torch   electricity   mobile_phone 
                                                                                                                                                                   1 
                                                                                     cow_cart   lorry   motorcyle   sterio   cow_plough   solar_panel   mobile_phone 
                                                                                                                                                                   1 
                                                              cow_cart   motorcyle   bicycle   radio   cow_plough   solar_panel   solar_torch   table   mobile_phone 
                                                                                                                                                                   1 
                                                     cow_cart   motorcyle   bicycle   radio   sterio   cow_plough   solar_panel   solar_torch   table   mobile_phone 
                                                                                                                                                                   1 
                                                                       cow_cart   motorcyle   bicycle   television   radio   cow_plough   solar_panel   mobile_phone 
                                                                                                                                                                   1 
                                                                cow_cart   motorcyle   bicycle   television   radio   cow_plough   solar_panel   solar_torch   table 
                                                                                                                                                                   1 
                                                 cow_cart   motorcyle   bicycle   television   radio   cow_plough   solar_panel   solar_torch   table   mobile_phone 
                                                                                                                                                                   1 
                             cow_cart   motorcyle   bicycle   television   radio   cow_plough   solar_torch   electricity   table   sofa_set   mobile_phone   fridge 
                                                                                                                                                                   1 
                                                                                              cow_cart   motorcyle   radio   cow_plough   solar_panel   mobile_phone 
                                                                                                                                                                   1 
                                                cow_cart   motorcyle   television   radio   cow_plough   solar_panel   solar_torch   table   sofa_set   mobile_phone 
                                                                                                                                                                   1 
                                                                         cow_cart   motorcyle   television   radio   cow_plough   solar_torch   table   mobile_phone 
                                                                                                                                                                   1 
                                                                                    cow_cart   radio   cow_plough   solar_panel   solar_torch   table   mobile_phone 
                                                                                                                                                                   1 
                                                                       cow_cart   television   radio   cow_plough   solar_panel   solar_torch   table   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                                            cow_plough   solar_panel 
                                                                                                                                                                   1 
                                                                                                                        cow_plough   table   sofa_set   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                                                         electricity 
                                                                                                                                                                   1 
                                                                                                                                  motorcyle   bicycle   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                    motorcyle   bicycle   radio   cow_plough   table 
                                                                                                                                                                   1 
                                                                                      motorcyle   bicycle   radio   sterio   cow_plough   solar_panel   mobile_phone 
                                                                                                                                                                   1 
                                                                              motorcyle   bicycle   radio   sterio   cow_plough   solar_panel   table   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                  motorcyle   bicycle   radio   table   mobile_phone 
                                                                                                                                                                   1 
                                                                                  motorcyle   bicycle   television   radio   cow_plough   solar_panel   mobile_phone 
                                                                                                                                                                   1 
                                                                  motorcyle   bicycle   television   radio   cow_plough   solar_panel   solar_torch   table   fridge 
                                                                                                                                                                   1 
                                                                       motorcyle   computer   television   sterio   solar_panel   solar_torch   table   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                                              motorcyle   cow_plough 
                                                                                                                                                                   1 
                                                                                                                       motorcyle   radio   cow_plough   mobile_phone 
                                                                                                                                                                   1 
                                                                                   motorcyle   radio   cow_plough   solar_panel   solar_torch   table   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                              motorcyle   radio   cow_plough   table 
                                                                                                                                                                   1 
                                                                                                                                     motorcyle   radio   solar_panel 
                                                                                                                                                                   1 
                                                                                        motorcyle   radio   sterio   cow_plough   solar_panel   table   mobile_phone 
                                                                                                                                                                   1 
                                                                                                    motorcyle   television   cow_plough   solar_panel   mobile_phone 
                                                                                                                                                                   1 
                                                                                            motorcyle   television   radio   cow_plough   solar_panel   mobile_phone 
                                                                                                                                                                   1 
                                                                                   motorcyle   television   radio   solar_panel   solar_torch   table   mobile_phone 
                                                                                                                                                                   1 
                                                                                                        motorcyle   television   sterio   solar_panel   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                     radio   cow_plough   solar_panel   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                      radio   cow_plough   solar_panel   solar_torch 
                                                                                                                                                                   1 
                                                                                                       radio   cow_plough   solar_panel   solar_torch   mobile_phone 
                                                                                                                                                                   1 
                                                                                               radio   cow_plough   solar_panel   solar_torch   table   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                                    radio   cow_plough   solar_torch 
                                                                                                                                                                   1 
                                                                                                                           radio   cow_plough   table   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                                   radio   solar_panel   solar_torch 
                                                                                                                                                                   1 
                                                                                                                    radio   solar_panel   solar_torch   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                                                 radio   solar_torch 
                                                                                                                                                                   1 
                                                                                                                                  radio   solar_torch   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                             radio   table   sofa_set   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                                                         solar_panel 
                                                                                                                                                                   1 
                                                                                                                                          solar_torch   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                              television   cow_plough   mobile_phone 
                                                                                                                                                                   1 
                                                                                  television   radio   cow_plough   solar_panel   solar_torch   table   mobile_phone 
                                                                                                                                                                   1 
                                                                                                                              television   solar_panel   solar_torch 
                                                                                                                                                                   1 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># how many radio do we have over 131 rows?</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>items_owned_count[<span class="st">"radio"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>radio 
    4 </code></pre>
</div>
</div>
</section>
<section id="filtering" class="level1">
<h1>Filtering</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(SAFI_openrefine<span class="sc">$</span>respondent_roof_type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
        grass mabatipitched mabatisloping 
           73            10            48 </code></pre>
</div>
</div>
<section id="some-analysis" class="level2">
<h2 class="anchored" data-anchor-id="some-analysis">2. Some analysis</h2>
<p>For the second part I did some Explorative Data Analysis using <code>tidyverse</code> package of R?RStudio and copilot. I used a clean dataset and followed Data Carpentry:R for Social Scientists. See <a href="https://kelseygonzalez.github.io/2020-01-15-brynmawr-lessons/intro.html">Data Carpentry:R for Social Scientists</a>, especially chapter 6 <em>Data wrangling with dplyr</em> and chapter 8 <em>Data visualization with ggplot2</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="st">"data"</span>))</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dir.create</span>(<span class="st">"data"</span>)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span> <span class="fu">file.exists</span>(<span class="st">"data/SAFI_clean.csv"</span>)) {</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">download.file</span>(<span class="st">"https://ndownloader.figshare.com/files/11492171"</span>,</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"data/SAFI_clean.csv"</span>, <span class="at">mode =</span> <span class="st">"wb"</span>)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="co"># open SAFI_clean.csv</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>safi <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/SAFI_clean.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 131 Columns: 14
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (7): village, respondent_wall_type, memb_assoc, affect_conflicts, items...
dbl  (6): key_ID, no_membrs, years_liv, rooms, liv_count, no_meals
dttm (1): interview_date

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>safi</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 131 × 14
   key_ID village  interview_date      no_membrs years_liv respondent_wall_type
    &lt;dbl&gt; &lt;chr&gt;    &lt;dttm&gt;                  &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;               
 1      1 God      2016-11-17 00:00:00         3         4 muddaub             
 2      1 God      2016-11-17 00:00:00         7         9 muddaub             
 3      3 God      2016-11-17 00:00:00        10        15 burntbricks         
 4      4 God      2016-11-17 00:00:00         7         6 burntbricks         
 5      5 God      2016-11-17 00:00:00         7        40 burntbricks         
 6      6 God      2016-11-17 00:00:00         3         3 muddaub             
 7      7 God      2016-11-17 00:00:00         6        38 muddaub             
 8      8 Chirodzo 2016-11-16 00:00:00        12        70 burntbricks         
 9      9 Chirodzo 2016-11-16 00:00:00         8         6 burntbricks         
10     10 Chirodzo 2016-12-16 00:00:00        12        23 burntbricks         
# ℹ 121 more rows
# ℹ 8 more variables: rooms &lt;dbl&gt;, memb_assoc &lt;chr&gt;, affect_conflicts &lt;chr&gt;,
#   liv_count &lt;dbl&gt;, items_owned &lt;chr&gt;, no_meals &lt;dbl&gt;, months_lack_food &lt;chr&gt;,
#   instanceID &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(safi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 131
Columns: 14
$ key_ID               &lt;dbl&gt; 1, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15…
$ village              &lt;chr&gt; "God", "God", "God", "God", "God", "God", "God", …
$ interview_date       &lt;dttm&gt; 2016-11-17, 2016-11-17, 2016-11-17, 2016-11-17, …
$ no_membrs            &lt;dbl&gt; 3, 7, 10, 7, 7, 3, 6, 12, 8, 12, 6, 7, 6, 10, 5, …
$ years_liv            &lt;dbl&gt; 4, 9, 15, 6, 40, 3, 38, 70, 6, 23, 20, 20, 8, 20,…
$ respondent_wall_type &lt;chr&gt; "muddaub", "muddaub", "burntbricks", "burntbricks…
$ rooms                &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 3, 1, 5, 1, 3, 1, 3, 2, 1, 1…
$ memb_assoc           &lt;chr&gt; "NULL", "yes", "NULL", "NULL", "NULL", "NULL", "n…
$ affect_conflicts     &lt;chr&gt; "NULL", "once", "NULL", "NULL", "NULL", "NULL", "…
$ liv_count            &lt;dbl&gt; 1, 3, 1, 2, 4, 1, 1, 2, 3, 2, 2, 2, 3, 3, 3, 4, 1…
$ items_owned          &lt;chr&gt; "bicycle;television;solar_panel;table", "cow_cart…
$ no_meals             &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 3, 2, 3, 3, 2, 3, 2, 3, 2, 3, 2…
$ months_lack_food     &lt;chr&gt; "Jan", "Jan;Sept;Oct;Nov;Dec", "Jan;Feb;Mar;Oct;N…
$ instanceID           &lt;chr&gt; "uuid:ec241f2c-0609-46ed-b5e8-fe575f6cefef", "uui…</code></pre>
</div>
</div>
</section>
<section id="explorative-data-analysis-using-dplyr" class="level2">
<h2 class="anchored" data-anchor-id="explorative-data-analysis-using-dplyr">Explorative Data Analysis using <code>dplyr</code></h2>
<section id="selecting" class="level3">
<h3 class="anchored" data-anchor-id="selecting">selecting</h3>
<p>The code <code>select()</code> we use to select columns</p>
<p>For example</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#select interview_date, village, no_membrs, years_liv</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(safi, interview_date, village, no_membrs, years_liv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 131 × 4
   interview_date      village  no_membrs years_liv
   &lt;dttm&gt;              &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;
 1 2016-11-17 00:00:00 God              3         4
 2 2016-11-17 00:00:00 God              7         9
 3 2016-11-17 00:00:00 God             10        15
 4 2016-11-17 00:00:00 God              7         6
 5 2016-11-17 00:00:00 God              7        40
 6 2016-11-17 00:00:00 God              3         3
 7 2016-11-17 00:00:00 God              6        38
 8 2016-11-16 00:00:00 Chirodzo        12        70
 9 2016-11-16 00:00:00 Chirodzo         8         6
10 2016-12-16 00:00:00 Chirodzo        12        23
# ℹ 121 more rows</code></pre>
</div>
</div>
</section>
<section id="filtering-1" class="level3">
<h3 class="anchored" data-anchor-id="filtering-1">filtering</h3>
<p>You can also choose rows based on their values using <code>filter()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter for rows where village is "God"</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(safi, village <span class="sc">==</span> <span class="st">"God"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 43 × 14
   key_ID village interview_date      no_membrs years_liv respondent_wall_type
    &lt;dbl&gt; &lt;chr&gt;   &lt;dttm&gt;                  &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;               
 1      1 God     2016-11-17 00:00:00         3         4 muddaub             
 2      1 God     2016-11-17 00:00:00         7         9 muddaub             
 3      3 God     2016-11-17 00:00:00        10        15 burntbricks         
 4      4 God     2016-11-17 00:00:00         7         6 burntbricks         
 5      5 God     2016-11-17 00:00:00         7        40 burntbricks         
 6      6 God     2016-11-17 00:00:00         3         3 muddaub             
 7      7 God     2016-11-17 00:00:00         6        38 muddaub             
 8     11 God     2016-11-21 00:00:00         6        20 sunbricks           
 9     12 God     2016-11-21 00:00:00         7        20 burntbricks         
10     13 God     2016-11-21 00:00:00         6         8 burntbricks         
# ℹ 33 more rows
# ℹ 8 more variables: rooms &lt;dbl&gt;, memb_assoc &lt;chr&gt;, affect_conflicts &lt;chr&gt;,
#   liv_count &lt;dbl&gt;, items_owned &lt;chr&gt;, no_meals &lt;dbl&gt;, months_lack_food &lt;chr&gt;,
#   instanceID &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="pipes" class="level3">
<h3 class="anchored" data-anchor-id="pipes">pipes</h3>
<p>The pipe operator <code>%&gt;%</code> is used to chain together multiple <code>dplyr</code> functions (for example selecting and filtering. You can also use <code>|&gt;</code> instead of <code>%&gt;%</code> if you prefer.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter village=God and select no_membrs and years_liv</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>safi <span class="sc">%&gt;%</span> </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(village <span class="sc">==</span> <span class="st">"God"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(no_membrs, years_liv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 43 × 2
   no_membrs years_liv
       &lt;dbl&gt;     &lt;dbl&gt;
 1         3         4
 2         7         9
 3        10        15
 4         7         6
 5         7        40
 6         3         3
 7         6        38
 8         6        20
 9         7        20
10         6         8
# ℹ 33 more rows</code></pre>
</div>
</div>
</section>
<section id="mutating" class="level3">
<h3 class="anchored" data-anchor-id="mutating">mutating</h3>
<p>We use <code>mutate()</code> to create new columns</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">#ratio of number of household members to number of rooms</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>safi <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ratio =</span> no_membrs <span class="sc">/</span> rooms)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 131 × 15
   key_ID village  interview_date      no_membrs years_liv respondent_wall_type
    &lt;dbl&gt; &lt;chr&gt;    &lt;dttm&gt;                  &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;               
 1      1 God      2016-11-17 00:00:00         3         4 muddaub             
 2      1 God      2016-11-17 00:00:00         7         9 muddaub             
 3      3 God      2016-11-17 00:00:00        10        15 burntbricks         
 4      4 God      2016-11-17 00:00:00         7         6 burntbricks         
 5      5 God      2016-11-17 00:00:00         7        40 burntbricks         
 6      6 God      2016-11-17 00:00:00         3         3 muddaub             
 7      7 God      2016-11-17 00:00:00         6        38 muddaub             
 8      8 Chirodzo 2016-11-16 00:00:00        12        70 burntbricks         
 9      9 Chirodzo 2016-11-16 00:00:00         8         6 burntbricks         
10     10 Chirodzo 2016-12-16 00:00:00        12        23 burntbricks         
# ℹ 121 more rows
# ℹ 9 more variables: rooms &lt;dbl&gt;, memb_assoc &lt;chr&gt;, affect_conflicts &lt;chr&gt;,
#   liv_count &lt;dbl&gt;, items_owned &lt;chr&gt;, no_meals &lt;dbl&gt;, months_lack_food &lt;chr&gt;,
#   instanceID &lt;chr&gt;, ratio &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Let us research whether a member of an irrigation association had any effect on the ratio of household members to rooms. To look at this relationship, we remove data from our dataset where the respondent didn’t answer the question of whether they were a memnber of an irrigation association (recorded als “NULL” in the dataset)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to remove these cases, we could use filter() to remove and people per room is ratio of number of household members to number of rooms </span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>safinew<span class="ot">&lt;-</span>safi <span class="sc">%&gt;%</span> </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(memb_assoc)) <span class="sc">%&gt;%</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">people_per_room =</span> no_membrs <span class="sc">/</span> rooms)</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>safinew</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 131 × 15
   key_ID village  interview_date      no_membrs years_liv respondent_wall_type
    &lt;dbl&gt; &lt;chr&gt;    &lt;dttm&gt;                  &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;               
 1      1 God      2016-11-17 00:00:00         3         4 muddaub             
 2      1 God      2016-11-17 00:00:00         7         9 muddaub             
 3      3 God      2016-11-17 00:00:00        10        15 burntbricks         
 4      4 God      2016-11-17 00:00:00         7         6 burntbricks         
 5      5 God      2016-11-17 00:00:00         7        40 burntbricks         
 6      6 God      2016-11-17 00:00:00         3         3 muddaub             
 7      7 God      2016-11-17 00:00:00         6        38 muddaub             
 8      8 Chirodzo 2016-11-16 00:00:00        12        70 burntbricks         
 9      9 Chirodzo 2016-11-16 00:00:00         8         6 burntbricks         
10     10 Chirodzo 2016-12-16 00:00:00        12        23 burntbricks         
# ℹ 121 more rows
# ℹ 9 more variables: rooms &lt;dbl&gt;, memb_assoc &lt;chr&gt;, affect_conflicts &lt;chr&gt;,
#   liv_count &lt;dbl&gt;, items_owned &lt;chr&gt;, no_meals &lt;dbl&gt;, months_lack_food &lt;chr&gt;,
#   instanceID &lt;chr&gt;, people_per_room &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="summarizing" class="level3">
<h3 class="anchored" data-anchor-id="summarizing">summarizing</h3>
<p><code>group_by()</code> is used to group the data by a variable and often used together with <code>summarize</code>. <code>summarize()</code> is used to calculate summary statistics for each group.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to compute the average number of household size for each village</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>safi <span class="sc">%&gt;%</span> </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(village) <span class="sc">%&gt;%</span> </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_no_membrs =</span> <span class="fu">mean</span>(no_membrs))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  village  mean_no_membrs
  &lt;chr&gt;             &lt;dbl&gt;
1 Chirodzo           7.08
2 God                6.86
3 Ruaca              7.57</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># group by multiple columns (village, memb_assoc) and calculate the mean number of household members</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>safi <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(village, memb_assoc) <span class="sc">%&gt;%</span> </span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_no_membrs =</span> <span class="fu">mean</span>(no_membrs))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'village'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 3
# Groups:   village [3]
  village  memb_assoc mean_no_membrs
  &lt;chr&gt;    &lt;chr&gt;               &lt;dbl&gt;
1 Chirodzo NULL                 5.08
2 Chirodzo no                   8.06
3 Chirodzo yes                  7.82
4 God      NULL                 6   
5 God      no                   7.13
6 God      yes                  8   
7 Ruaca    NULL                 6.22
8 Ruaca    no                   7.18
9 Ruaca    yes                  9.5 </code></pre>
</div>
</div>
<p>Once the data are groupes, you can also summarize multiple variables at once (and not necessary on the same variable)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># we could  add a column indicating the minimum household size for each village for each group (member of irrigation association or not) and take out if memb_assoc is missing.</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>safi <span class="sc">%&gt;%</span> </span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(memb_assoc)) <span class="sc">%&gt;%</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(village, memb_assoc) <span class="sc">%&gt;%</span> </span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_no_membrs =</span> <span class="fu">mean</span>(no_membrs),</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">min_no_membrs =</span> <span class="fu">min</span>(no_membrs))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'village'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 4
# Groups:   village [3]
  village  memb_assoc mean_no_membrs min_no_membrs
  &lt;chr&gt;    &lt;chr&gt;               &lt;dbl&gt;         &lt;dbl&gt;
1 Chirodzo NULL                 5.08             2
2 Chirodzo no                   8.06             4
3 Chirodzo yes                  7.82             2
4 God      NULL                 6                3
5 God      no                   7.13             3
6 God      yes                  8                5
7 Ruaca    NULL                 6.22             3
8 Ruaca    no                   7.18             2
9 Ruaca    yes                  9.5              5</code></pre>
</div>
</div>
</section>
<section id="counting" class="level3">
<h3 class="anchored" data-anchor-id="counting">counting</h3>
<p><code>count()</code> is used to count the number of observations in each group, for each factor or comination of factors</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># count village</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>safi <span class="sc">%&gt;%</span> </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(village)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  village      n
  &lt;chr&gt;    &lt;int&gt;
1 Chirodzo    39
2 God         43
3 Ruaca       49</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># count village in decreasing order</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>safi <span class="sc">%&gt;%</span> </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(village, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  village      n
  &lt;chr&gt;    &lt;int&gt;
1 Ruaca       49
2 God         43
3 Chirodzo    39</code></pre>
</div>
</div>
</section>
</section>
<section id="data-visualization" class="level2">
<h2 class="anchored" data-anchor-id="data-visualization">Data visualization</h2>
<p>Building plots with <code>ggplot2</code> involves three steps: - step 1: use <code>ggplot()</code> to specify the dataset and variables to be plotted - step 2: add on layers to specify the type of plot (points, lines, bars, etc.) - step 3: (optionally) add on themes, faceting specifications, and other details to make the plot more informative and interpretable</p>
<p>Building plots with ggplot2 is an iterative process. You may need to try out several different combinations of variables and layers before you get the plot you want.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot no_membrs vs. rooms </span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> safi) <span class="sc">+</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> no_membrs, <span class="at">y =</span> rooms))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="SafiviaR_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use bit of randomness in position to avoid overplotting, alpha 0.5</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> safi) <span class="sc">+</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> no_membrs, <span class="at">y =</span> rooms), <span class="at">position =</span> <span class="st">"jitter"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="SafiviaR_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># same plot but use color blue</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> safi) <span class="sc">+</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> no_membrs, <span class="at">y =</span> rooms), <span class="at">position =</span> <span class="st">"jitter"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="SafiviaR_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># same plot but use color=village</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> safi) <span class="sc">+</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> no_membrs, <span class="at">y =</span> rooms, <span class="at">color =</span> village), <span class="at">position =</span> <span class="st">"jitter"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="SafiviaR_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># same plot but add title and subtitle</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> safi) <span class="sc">+</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> no_membrs, <span class="at">y =</span> rooms, <span class="at">color =</span> village), <span class="at">position =</span> <span class="st">"jitter"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of household members vs. number of rooms"</span>,</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Data from SAFI"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="SafiviaR_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><code>ggplot</code> has a special technique called faceting that allows you to split one plot into multiple plots based on a factor included in the dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot bar x=reSpondent_wall_type facet=village</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> safi) <span class="sc">+</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> respondent_wall_type)) <span class="sc">+</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> village)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="SafiviaR_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># same plot but theme_bw()</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> safi) <span class="sc">+</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> respondent_wall_type)) <span class="sc">+</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> village) <span class="sc">+</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="SafiviaR_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>For me these were the first days I used copilot. I had no idea how I would find it. I was a bit sceptical I have to admit. This system works very good if:<br>
- you do your task step by step;<br>
- formulate simple;<br>
- you need to know the program to ask the right questions;<br>
- you have to get used of the ghost writing;<br>
- don’t follow but take the lead yourself.</p>
<p>I will use the system the next months to and I will make it my own.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>